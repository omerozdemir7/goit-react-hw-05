{"version":3,"file":"MovieDetailsPage-mJLv_QJb.js","sources":["../../src/pages/MovieDetailsPage/MovieDetailsPage.jsx"],"sourcesContent":["import { useEffect, useState, useRef, Suspense } from \"react\";\r\nimport { useParams, Link, Outlet, useLocation } from \"react-router-dom\";\r\nimport { getMovieDetails, getImageUrl } from \"../../api/tmdb-api\";\r\nimport css from \"./MovieDetailsPage.module.css\";\r\n\r\nexport default function MovieDetailsPage() {\r\n  const { movieId } = useParams();\r\n  const [movie, setMovie] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const location = useLocation();\r\n  \r\n  // Geri dönülecek konumu kaydediyoruz. Eğer yoksa '/movies' varsayılan olur.\r\n  const backLinkHref = useRef(location.state?.from ?? \"/movies\");\r\n\r\n  useEffect(() => {\r\n    async function fetchDetails() {\r\n      try {\r\n        setLoading(true);\r\n        setError(false);\r\n        const data = await getMovieDetails(movieId);\r\n        setMovie(data);\r\n      } catch (error) {\r\n        setError(true);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchDetails();\r\n  }, [movieId]);\r\n\r\n  if (loading) return <div>Loading details...</div>;\r\n  if (error) return <div>Error loading movie details.</div>;\r\n  if (!movie) return null;\r\n\r\n  const releaseYear = movie.release_date ? new Date(movie.release_date).getFullYear() : \"Unknown\";\r\n  const userScore = Math.round(movie.vote_average * 10);\r\n\r\n  return (\r\n    <div className={css.container}>\r\n      <Link to={backLinkHref.current} className={css.goBack}>\r\n        ← Go back\r\n      </Link>\r\n\r\n      <div className={css.movieInfo}>\r\n        <img \r\n          src={getImageUrl(movie.poster_path)} \r\n          alt={movie.title} \r\n          className={css.poster}\r\n        />\r\n        <div className={css.details}>\r\n          <h1>{movie.title} ({releaseYear})</h1>\r\n          <p>User Score: {userScore}%</p>\r\n          \r\n          <h3>Overview</h3>\r\n          <p>{movie.overview}</p>\r\n\r\n          <h3>Genres</h3>\r\n          <p>{movie.genres.map(g => g.name).join(\", \")}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={css.additional}>\r\n        <h3>Additional Information</h3>\r\n        <ul className={css.linkList}>\r\n          <li><Link to=\"cast\" className={css.link}>Cast</Link></li>\r\n          <li><Link to=\"reviews\" className={css.link}>Reviews</Link></li>\r\n        </ul>\r\n      </div>\r\n\r\n      <Suspense fallback={<div>Loading sub-component...</div>}>\r\n        <Outlet />\r\n      </Suspense>\r\n    </div>\r\n  );\r\n}"],"names":["MovieDetailsPage","movieId","useParams","movie","setMovie","useState","loading","setLoading","error","setError","location","useLocation","backLinkHref","useRef","useEffect","fetchDetails","data","getMovieDetails","jsx","releaseYear","userScore","jsxs","css","Link","getImageUrl","g","Suspense","Outlet"],"mappings":"2YAKA,SAAwBA,GAAmB,CACzC,KAAM,CAAE,QAAAC,CAAA,EAAYC,EAAA,EACd,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,IAAI,EACjC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAK,EACtC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,EAAK,EAClCK,EAAWC,EAAA,EAGXC,EAAeC,EAAAA,OAAOH,EAAS,OAAO,MAAQ,SAAS,EAkB7D,GAhBAI,EAAAA,UAAU,IAAM,CACd,eAAeC,GAAe,CAC5B,GAAI,CACFR,EAAW,EAAI,EACfE,EAAS,EAAK,EACd,MAAMO,EAAO,MAAMC,EAAgBhB,CAAO,EAC1CG,EAASY,CAAI,CACf,MAAgB,CACdP,EAAS,EAAI,CACf,QAAA,CACEF,EAAW,EAAK,CAClB,CACF,CACAQ,EAAA,CACF,EAAG,CAACd,CAAO,CAAC,EAERK,EAAS,OAAOY,EAAAA,IAAC,MAAA,CAAI,SAAA,qBAAkB,EAC3C,GAAIV,EAAO,OAAOU,EAAAA,IAAC,MAAA,CAAI,SAAA,+BAA4B,EACnD,GAAI,CAACf,EAAO,OAAO,KAEnB,MAAMgB,EAAchB,EAAM,aAAe,IAAI,KAAKA,EAAM,YAAY,EAAE,YAAA,EAAgB,UAChFiB,EAAY,KAAK,MAAMjB,EAAM,aAAe,EAAE,EAEpD,OACEkB,EAAAA,KAAC,MAAA,CAAI,UAAWC,EAAI,UAClB,SAAA,CAAAJ,EAAAA,IAACK,GAAK,GAAIX,EAAa,QAAS,UAAWU,EAAI,OAAQ,SAAA,WAAA,CAEvD,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAWC,EAAI,UAClB,SAAA,CAAAJ,EAAAA,IAAC,MAAA,CACC,IAAKM,EAAYrB,EAAM,WAAW,EAClC,IAAKA,EAAM,MACX,UAAWmB,EAAI,MAAA,CAAA,EAEjBD,EAAAA,KAAC,MAAA,CAAI,UAAWC,EAAI,QAClB,SAAA,CAAAD,OAAC,KAAA,CAAI,SAAA,CAAAlB,EAAM,MAAM,KAAGgB,EAAY,GAAA,EAAC,SAChC,IAAA,CAAE,SAAA,CAAA,eAAaC,EAAU,GAAA,EAAC,EAE3BF,EAAAA,IAAC,MAAG,SAAA,UAAA,CAAQ,EACZA,EAAAA,IAAC,IAAA,CAAG,SAAAf,EAAM,QAAA,CAAS,EAEnBe,EAAAA,IAAC,MAAG,SAAA,QAAA,CAAM,EACVA,EAAAA,IAAC,IAAA,CAAG,SAAAf,EAAM,OAAO,IAAIsB,GAAKA,EAAE,IAAI,EAAE,KAAK,IAAI,CAAA,CAAE,CAAA,CAAA,CAC/C,CAAA,EACF,EAEAJ,EAAAA,KAAC,MAAA,CAAI,UAAWC,EAAI,WAClB,SAAA,CAAAJ,EAAAA,IAAC,MAAG,SAAA,wBAAA,CAAsB,EAC1BG,EAAAA,KAAC,KAAA,CAAG,UAAWC,EAAI,SACjB,SAAA,CAAAJ,EAAAA,IAAC,KAAA,CAAG,eAACK,EAAA,CAAK,GAAG,OAAO,UAAWD,EAAI,KAAM,SAAA,MAAA,CAAI,CAAA,CAAO,EACpDJ,EAAAA,IAAC,KAAA,CAAG,SAAAA,EAAAA,IAACK,EAAA,CAAK,GAAG,UAAU,UAAWD,EAAI,KAAM,SAAA,SAAA,CAAO,CAAA,CAAO,CAAA,CAAA,CAC5D,CAAA,EACF,EAEAJ,EAAAA,IAACQ,EAAAA,UAAS,SAAUR,EAAAA,IAAC,OAAI,SAAA,0BAAA,CAAwB,EAC/C,SAAAA,EAAAA,IAACS,EAAA,CAAA,CAAO,CAAA,CACV,CAAA,EACF,CAEJ"}