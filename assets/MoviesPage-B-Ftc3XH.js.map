{"version":3,"file":"MoviesPage-B-Ftc3XH.js","sources":["../../src/pages/MoviesPage/MoviesPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport { searchMovies } from \"../../api/tmdb-api\";\r\nimport MovieList from \"../../components/MovieList/MovieList\";\r\nimport css from \"./MoviesPage.module.css\";\r\n\r\nexport default function MoviesPage() {\r\n  const [movies, setMovies] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  \r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const query = searchParams.get(\"query\") ?? \"\";\r\n\r\n  useEffect(() => {\r\n    if (!query) return;\r\n\r\n    async function fetchMovies() {\r\n      try {\r\n        setLoading(true);\r\n        setError(false);\r\n        const data = await searchMovies(query);\r\n        setMovies(data);\r\n      } catch (e) {\r\n        setError(true);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchMovies();\r\n  }, [query]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const form = e.currentTarget;\r\n    const newQuery = form.elements.query.value.trim();\r\n    \r\n    if (newQuery === \"\") {\r\n      return;\r\n    }\r\n    setSearchParams({ query: newQuery });\r\n    form.reset();\r\n  };\r\n\r\n  return (\r\n    <div className={css.container}>\r\n      <form onSubmit={handleSubmit} className={css.form}>\r\n        <input \r\n          type=\"text\" \r\n          name=\"query\" \r\n          placeholder=\"Search movies...\" \r\n          className={css.input}\r\n        />\r\n        <button type=\"submit\" className={css.button}>Search</button>\r\n      </form>\r\n\r\n      {loading && <p>Loading...</p>}\r\n      {error && <p>Something went wrong!</p>}\r\n      {movies.length > 0 && <MovieList movies={movies} />}\r\n    </div>\r\n  );\r\n}"],"names":["MoviesPage","movies","setMovies","useState","loading","setLoading","error","setError","searchParams","setSearchParams","useSearchParams","query","useEffect","fetchMovies","data","searchMovies","handleSubmit","e","form","newQuery","jsxs","css","jsx","MovieList"],"mappings":"wQAMA,SAAwBA,GAAa,CACnC,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,CAAA,CAAE,EACjC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAK,EACtC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,EAAK,EAElC,CAACK,EAAcC,CAAe,EAAIC,EAAA,EAClCC,EAAQH,EAAa,IAAI,OAAO,GAAK,GAE3CI,EAAAA,UAAU,IAAM,CACd,GAAI,CAACD,EAAO,OAEZ,eAAeE,GAAc,CAC3B,GAAI,CACFR,EAAW,EAAI,EACfE,EAAS,EAAK,EACd,MAAMO,EAAO,MAAMC,EAAaJ,CAAK,EACrCT,EAAUY,CAAI,CAChB,MAAY,CACVP,EAAS,EAAI,CACf,QAAA,CACEF,EAAW,EAAK,CAClB,CACF,CACAQ,EAAA,CACF,EAAG,CAACF,CAAK,CAAC,EAEV,MAAMK,EAAgBC,GAAM,CAC1BA,EAAE,eAAA,EACF,MAAMC,EAAOD,EAAE,cACTE,EAAWD,EAAK,SAAS,MAAM,MAAM,KAAA,EAEvCC,IAAa,KAGjBV,EAAgB,CAAE,MAAOU,EAAU,EACnCD,EAAK,MAAA,EACP,EAEA,OACEE,EAAAA,KAAC,MAAA,CAAI,UAAWC,EAAI,UAClB,SAAA,CAAAD,OAAC,OAAA,CAAK,SAAUJ,EAAc,UAAWK,EAAI,KAC3C,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,KAAK,QACL,YAAY,mBACZ,UAAWD,EAAI,KAAA,CAAA,QAEhB,SAAA,CAAO,KAAK,SAAS,UAAWA,EAAI,OAAQ,SAAA,QAAA,CAAM,CAAA,EACrD,EAECjB,GAAWkB,EAAAA,IAAC,IAAA,CAAE,SAAA,YAAA,CAAU,EACxBhB,GAASgB,EAAAA,IAAC,IAAA,CAAE,SAAA,uBAAA,CAAqB,EACjCrB,EAAO,OAAS,GAAKqB,EAAAA,IAACC,GAAU,OAAAtB,CAAA,CAAgB,CAAA,EACnD,CAEJ"}